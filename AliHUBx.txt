-- Simple client-side script for StarterPlayer > StarterPlayerScripts
local player = game.Players.LocalPlayer
local mouse = player:GetMouse()
local runService = game:GetService("RunService")

-- Store player name when script starts
local storedPlayerName = player.Name
local TpCompletedS = false

-- Simple freeze function
local function freezeCharacter(char, freezeTime)
    freezeTime = freezeTime or 1
    
    -- Anchor all parts
    for _, part in pairs(char:GetChildren()) do
        if part:IsA("BasePart") then
            part.Anchored = true
        end
    end
    
    -- Wait and unfreeze
    wait(freezeTime)
    
    for _, part in pairs(char:GetChildren()) do
        if part:IsA("BasePart") then
            part.Anchored = false
        end
    end
end

-- Function to find and teleport to player's base  
local function teleportToBase()
    TpCompletedS = false
    local char = player.Character
    if not char or not char:FindFirstChild("HumanoidRootPart") then
        print("Character not found")
        return
    end
    
    print("Starting search for base...")
    print("Looking for:", storedPlayerName .. "'s Base")
    
    -- Search through all descendants in workspace
    for _, obj in pairs(game.Workspace:GetDescendants()) do
        -- Look for Models
        if obj:IsA("Model") then
            -- Check if model has PlotSign
            local plotSign = obj:FindFirstChild("PlotSign")
            if plotSign then
                print("Found PlotSign in:", obj.Name)
                
                -- Check for SurfaceGui in PlotSign
                local surfaceGui = plotSign:FindFirstChild("SurfaceGui")
                if surfaceGui then
                    print("Found SurfaceGui")
                    
                    -- Look through all children for Frame
                    for _, child in pairs(surfaceGui:GetChildren()) do
                        if child:IsA("Frame") then
                            print("Found Frame")
                            
                            -- Look for TextLabel in Frame
                            for _, label in pairs(child:GetChildren()) do
                                if label:IsA("TextLabel") then
                                    local text = label.Text
                                    local expectedText = storedPlayerName .. "'s Base"
                                    
                                    print("TextLabel text:", text)
                                    print("Expected:", expectedText)
                                    
                                    if text == expectedText then
                                        print("Match found! Teleporting...")
                                        
                                        -- Teleport to PlotSign position
                                        if plotSign:IsA("BasePart") then
                                            char.HumanoidRootPart.CFrame = plotSign.CFrame + Vector3.new(0, 5, 0)
                                        else
                                            -- Try to find a BasePart parent
                                            local parent = plotSign.Parent
                                            while parent and not parent:IsA("BasePart") do
                                                parent = parent.Parent
                                            end
                                            if parent and parent:IsA("BasePart") then
                                                char.HumanoidRootPart.CFrame = parent.CFrame + Vector3.new(0, 5, 0)
                                            end
                                        end
                                        
                                        -- Freeze character
                                        spawn(function()
                                            freezeCharacter(char, 1)
                                            TpCompletedS = true
                                            print("Teleport completed!")
                                        end)
                                        
                                        return
                                    end
                                end
                            end
                        end
                    end
                end
            end
        end
    end
    
    print("Base not found for player:", storedPlayerName)
end

-- Simple GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "SimpleModMenu"
screenGui.Parent = player:WaitForChild("PlayerGui")

-- Main button
local mainButton = Instance.new("TextButton")
mainButton.Name = "MainButton"
mainButton.Size = UDim2.new(0, 100, 0, 50)
mainButton.Position = UDim2.new(0, 10, 0, 10)
mainButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
mainButton.TextColor3 = Color3.fromRGB(255, 255, 255)
mainButton.Text = "TP BASE"
mainButton.Font = Enum.Font.SourceSans
mainButton.TextSize = 18
mainButton.Parent = screenGui

-- Button click handler
mainButton.MouseButton1Click:Connect(function()
    mainButton.Text = "Searching..."
    mainButton.BackgroundColor3 = Color3.fromRGB(100, 100, 0)
    
    teleportToBase()
    
    wait(0.5)
    mainButton.Text = "TP BASE"
    mainButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
end)

print("Simple mod menu loaded!")
print("Player name stored:", storedPlayerName)
